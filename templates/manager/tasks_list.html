{% extends 'base.html' %}
{% load crispy_forms_filters %}

{% block content %}
  <h1>Tasks: <a style="float: right;" href="{% url 'manager:task-create' %}">Create Task</a></h1>
  <form action="" method="GET" class="form-inline" name="">
    {{ search_form|crispy }}
    <input class="btn btn-secondary" type="submit" value="ðŸ”Ž" />
  </form>
  {% if tasks_list %}
    <table class="table">
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Deadline</th>
        <th>Tags</th>
      </tr>
      <h2><a href="{% url 'manager:tag-create' %}">Create a Tag</a></h2>
      {% for task in tasks_list %}
        <tr>
          <td>
            <a href="{{ task.get_absolute_url }}">{{ task.name }}</a>
          </td>
          <td>{{ task.task_type }}</td>
          <td>{{ task.deadline }}</td>
          <td>
            {% for tag in task.tags.all %}
              {{ tag.name }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
          </td>
        </tr>
      {% endfor %}
    </table>
  {% else %}
    <p>No tasks.</p>
  {% endif %}
{% endblock %}
